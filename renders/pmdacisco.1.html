<!DOCTYPE html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="man-page-info" data-date="PCP" data-package="Performance Co-Pilot" data-section-name="">
<title>PMDACISCO</title>
<h1>PMDACISCO</h1>
<div class="section">
  <h2>NAME</h2>
  <p><strong>pmdacisco</strong> - Cisco router performance metrics domain agent (PMDA)
</div>
<div class="section">
  <h2>SYNOPSIS</h2>
  <p><strong>$PCP_PMDAS_DIR/cisco/pmdacisco</strong> [<strong>-d</strong> <em>domain</em>] [<strong>-l</strong> <em>logfile</em>] [<strong>-U</strong> <em>username</em>] [<strong>-P</strong> <em>password</em>] [<strong>-r</strong> <em>refresh</em>] [<strong>-s</strong> <em>prompt</em>] [<strong>-M</strong> <em>username</em>] [<strong>-x</strong> <em>port</em>] <em>host:interface-spec</em> [...]<br>
  <strong>$PCP_PMDAS_DIR/cisco/parse</strong> [options] <em>host:interface-spec</em> [...]<br>
  <strong>$PCP_PMDAS_DIR/cisco/probe</strong> [<strong>-P</strong> <em>password</em>] [<strong>-s</strong> <em>prompt</em>] [<strong>-U</strong> <em>username</em>] [<strong>-x</strong> <em>port</em>] <em>host</em>
</div>
<div class="section">
  <h2>DESCRIPTION</h2>
  <p><strong>pmdacisco</strong> is a Performance Metrics Domain Agent (PMDA) which extracts performance metrics from one or more Cisco routers.
  <p>A brief description of the <strong>pmdacisco</strong> command line options follows:
  <dl>
    <dt><strong>-d</strong>
    <dd>It is absolutely crucial that the performance metrics <em>domain</em> number specified here is unique and consistent. That is, <em>domain</em> should be different for every PMDA on the one host, and the same <em>domain</em> number should be used for the same PMDA on all hosts.
    <dt><strong>-l</strong>
    <dd>Location of the log file. By default, a log file named <em>cisco.log</em> is written in the current directory of <strong>pmcd</strong>(1) when <strong>pmdacisco</strong> is started, i.e. <em>$PCP_LOG_DIR/pmcd</em>. If the log file cannot be created or is not writable, output is written to the standard error instead.
    <dt><strong>-P</strong>
    <dd>By default, it is assumed that no user-level password is required to access the Cisco's telnet port. If user-level passwords have been enabled on the Ciscos, then those passwords must be specified to <strong>pmdacisco</strong>. If specified with the <strong>-P</strong> option, <em>password</em> will be used as the default user-level password for all Ciscos. See also the INTERFACE IDENTIFICATION section below.
    <dt><strong>-r</strong>
    <dd><strong>pmdacisco</strong> will refresh the current values for all performance metrics by contacting each Cisco router once every <em>refresh</em> seconds. The default <em>refresh</em> is 120 seconds.
    <dt><strong>-s</strong>
    <dd>The Cisco command prompt ends with the string <em>prompt</em>. The default value is “&gt;”. The only way <strong>pmdacisco</strong> can synchronize the sending of commands and the parsing of output is by recognizing <em>prompt</em> as a unique string that comes at the end of all output, i.e. as the command prompt when waiting for the next command.
    <dt><strong>-U</strong>
    <dd>By default, it is assumed that no username login is required to access the Cisco's telnet port. If username login has been enabled on the Ciscos, then the corresponding usernames must be specified to <strong>pmdacisco</strong>. If specified with the <strong>-U</strong> option, <em>username</em> will be used as the default username login for all Ciscos. See also the INTERFACE IDENTIFICATION section below.
    <dt><strong>-M</strong>
    <dd>User account under which to run the agent. The default is the unprivileged “pcp” account in current versions of PCP, but in older versions the superuser account (“root”) was used by default.
    <dt><strong>-x</strong>
    <dd>Connect to the Cisco via TCP port number <em>port</em> rather than the default 23 for a telnet connection.
  </dl>
  <p>For each interface, once the telnet connection is established, <strong>pmdacisco</strong> is willing to wait up to 5 seconds for the Cisco to provide a new snapshot of the requested information. If this does not happen, the telnet connection is broken and no values are returned. This prevents <strong>pmdacisco</strong> tying up the Cisco's telnet ports waiting indefinitely when the response from the router is not what is expected, e.g. if the format of the “show int” output changes, or the command is in error because an interface is no longer configured on the router.
</div>
<div class="section">
  <h2>INTERFACE IDENTIFICATION</h2>
  <p>As each Cisco router can support multiple network interfaces and/or multiple communications protocols, it is necessary to tell <strong>pmdacisco</strong> which interfaces are to be monitored.
  <p>The <em>host:interface-spec</em> arguments on the command line define a particular interface on a particular Cisco router. <em>host</em> should be a hostname or a “dot-notation” IP address that identifies the telnet port of a particular Cisco router. There are several components of the <em>interface-spec</em> as follows.
  <dl>
    <dt>protocol
    <dd>One of the abbreviations <strong>a</strong>, <strong>B</strong>, <strong>E</strong>, <strong>e</strong>, <strong>f</strong>, <strong>G</strong>, <strong>h</strong>, <strong>s</strong> or <strong>Vl</strong> respectively for ATM, BRI (ISDN), FastEthernet, Ethernet, FDDI, GigabitEthernet, HSSI, serial or Vlan.
    <dt>interface
    <dd>
      Depending on the model of the Cisco, this will either be an integer, e.g. <strong>s0</strong>, or an integer followed by a slash (“/”) followed by a subinterface identification in one of a variety of syntactic forms, e.g. <strong>e1/0</strong>, <strong>G0/0/1</strong> or <strong>s4/2.1</strong>.<br>
      <p>To discover the valid interfaces on a particular Cisco, connect to the telnet port (using <strong>telnet</strong>(1)) and enter the command “show int” and look for the interface identifiers following the keywords “Ethernet”, “Fddi”, “Serial”, etc.
      <p>Alternatively run the <strong>probe</strong> command.
    <dt>username
    <dd>If there is a username login, and it is different to the default (see <strong>-U</strong> above), it may be optionally specified here by appending “@” and the username to the end of <em>interface-spec</em>.
    <dt>password
    <dd>If there is a user-level password, and it is different to the default (see <strong>-P</strong> above), it may be optionally specified here by appending a question mark (“?”) and the password to the end of <em>interface-spec</em>.
    <dt>prompt
    <dd>If the Cisco command prompt is different to the default (see <strong>-s</strong> above), it may be optionally specified here by appending an exclamation mark (“!”) and the prompt to the end of <em>interface-spec</em>.
  </dl>
  <p>The following are examples of valid <em>interface-spec</em> arguments.
  <pre> my-router:e1/2
 123.456.789.0:s0
 wancisco:f2/3?trust_me
 somecisco:G1/0!myprompt
 cisco34.foo.bar.com:e2?way2cool
 mycisco:s2/2.1@mylogin
 yourcisco:E0/0@yourlogin?yourpassword
 mycisco:E0/0@mylogin?mypassword!myprompt</pre>
</div>
<div class="section">
  <h2>HELPER UTILITIES</h2>
  <p>The <strong>probe</strong> command may be used to discover the names of all interfaces for a particular Cisco router identified by <em>host</em>. The <strong>-P</strong> argument is the same as for <strong>pmdacisco</strong>.
  <p>The <strong>parse</strong> command takes exactly the same arguments as <strong>pmdacisco</strong>, but executes outside the control of any <strong>pmcd</strong>(1) and so may be used to diagnose problems with handling a particular Cisco router and/or one of its interfaces.
  <p>Additional diagnostic verbosity may be produced using the <strong>-D appl0,appl1,appl2</strong> command line option. <strong>appl0</strong> logs connect and disconnect events, login progress, high-level flow of control and extracted statistics. <strong>appl1</strong> traces all commands sent to the Cisco device. <strong>appl2</strong> logs tokenizing and parsing of the output from the Cisco device. Diagnostics are generated on standard error as each sample is fetched and parsed.
</div>
<div class="section">
  <h2>INSTALLATION</h2>
  <p>If you want access to the names, help text and values for the Cisco performance metrics, do the following as root:
  <pre> # cd $PCP_PMDAS_DIR/cisco
 # ./Install</pre>
  <p>If you want to undo the installation, do the following as root:
  <pre> # cd $PCP_PMDAS_DIR/cisco
 # ./Remove</pre>
  <p><strong>pmdacisco</strong> is launched by <strong>pmcd</strong>(1) and should never be executed directly. The Install and Remove scripts notify <strong>pmcd</strong>(1) when the agent is installed or removed.
</div>
<div class="section">
  <h2>FILES</h2>
  <dl>
    <dt><strong>$PCP_PMCDCONF_PATH</strong>
    <dd>command line options used to launch <strong>pmdacisco</strong>
    <dt><strong>$PCP_PMDAS_DIR/cisco/help</strong>
    <dd>default help text file for the Cisco metrics
    <dt><strong>$PCP_PMDAS_DIR/cisco/Install</strong>
    <dd>installation script for the <strong>pmdacisco</strong> agent
    <dt><strong>$PCP_PMDAS_DIR/cisco/Remove</strong>
    <dd>undo installation script for the <strong>pmdacisco</strong> agent
    <dt><strong>$PCP_LOG_DIR/pmcd/cisco.log</strong>
    <dd>default log file for error messages and other information from <strong>pmdacisco</strong>
  </dl>
</div>
<div class="section">
  <h2>PCP ENVIRONMENT</h2>
  <p>Environment variables with the prefix <strong>PCP_</strong> are used to parameterize the file and directory names used by PCP. On each installation, the file <em>/etc/pcp.conf</em> contains the local values for these variables. The <strong>$PCP_CONF</strong> variable may be used to specify an alternative configuration file, as described in <strong>pcp.conf</strong>(5).
</div>
<div class="section">
  <h2>SEE ALSO</h2>
  <p><strong>pmcd</strong>(1), <strong>pcp.conf</strong>(5) and <strong>pcp.env</strong>(5).
</div>

