<!DOCTYPE html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="man-page-info" data-extra1="" data-extra2="Performance Co-Pilot" data-extra3="">
<title>PMQUERY</title>
<h1>PMQUERY</h1>
<section>
  <h2>NAME</h2>
  <p><strong>pmconfirm</strong>, <strong>pmmessage</strong>, <strong>pmquery</strong> - general purpose dialog box
</section>
<section>
  <h2>SYNOPSIS</h2>
  <p><strong>pmconfirm</strong> [<strong>-c</strong>] [<strong>-b</strong> <em>button-name</em>] [<strong>-B</strong> <em>default-button-name</em>] [<strong>-t</strong> <em>string</em>] [<strong>-file</strong> <em>filename</em>] [<strong>-icon</strong> <em>icontype</em>] [<strong>-font</strong> <em>font</em>] [<strong>-header</strong> <em>titlebar-string</em>] [<strong>-useslider</strong>] [<strong>-noslider</strong>] [<strong>-noframe</strong>] [<strong>-exclusive</strong>]<br>
  <p><strong>pmmessage</strong> [<strong>-buttons</strong> <em>label1</em>[:<em>value1</em>][,<em>label2</em>[:<em>value2</em>][,...]]] [<strong>-center</strong>] [<strong>-nearmouse</strong>] [<strong>-default</strong> <em>button</em>] [<strong>-file</strong> <em>filename</em>] [<strong>-print</strong>] [<strong>-timeout</strong> <em>sec</em>] <em>message...</em>
  <p><strong>pmquery [</strong><strong>-input</strong>] [<strong>all above options...</strong>] [<em>message...</em>]
</section>
<section>
  <h2>DESCRIPTION</h2>
  <p><strong>pmquery</strong> provides a command-line-option compatible implementation of the <strong>xconfirm</strong> and <strong>xmessage</strong> tools, using a look-and-feel that is consistent with <strong>pmchart</strong>. Several extensions to the functionality of the original tools have been made, in order to improve their specific utility for <strong>pmchart</strong>, but wherever possible the original semantics remain.
  <p><strong>pmconfirm</strong> displays a line of text for each <strong>-t</strong> argument specified (or a file when the <strong>-file</strong> argument is used), and a button for each <strong>-b</strong> argument specified. When one of the buttons is pressed, the label of that button is written to <strong>pmquery's</strong> standard output. This provides a means of communication/feedback from within shell scripts and a means to display useful information to a user from an application.
  <p><strong>pmmessage</strong> displays a window containing a message from the command line, a file, or standard input. It additionally allows buttons to be associated with an exit status, and only optionally will write the label of the button to standard output.
  <p><strong>pmquery</strong> extends the above tools to additionally support limited user input, as free form text. In this <strong>-input</strong> mode, any text entered will be output when the default button is pressed. A default text can be entered using the same mechanisms as the other tools.
  <p>Command line options are available to specify font style, frame style, modality and one of several different icons to be presented for tailored visual feedback to the user.
  <dl class="indent-5">
    <dt><strong>-c or -center</strong>
    <dd>Center the window on the display.
    <dt><strong>-nearmouse</strong>
    <dd>Pop up the window near the mouse cursor.
    <dt><strong>-b <em>button-name</em></strong>
    <dd>Displays a button with the label <em>button-name</em>. If <em>button-name</em> is the empty string, the button in that position is not displayed. If no <strong>-b</strong> arguments are present, the default is a button with the label Continue. The exit status associated with <em>button-name</em> is zero.
    <dt><strong>-B <em>button-name</em></strong>
    <dd>Displays a button with the label <em>button-name</em> and specifies it as the button to be activated when enter is pressed. The exit status associated with <em>button-name</em> is zero.
    <dt><strong>-buttons <em>button,button,...</em></strong>
    <dd>This option will create one button for each comma-separated <em>button</em> argument. Each <em>button</em> consists of a label optionally followed by a colon and an exit value. The exit value will be returned if that button is selected. The default exit value is 100 plus the button number. Buttons are numbered from the left starting with one.
    <dt><strong>-default <em>label</em></strong>
    <dd>Defines the button with a matching <em>label</em> to be the default. If not specified there is no default. The corresponding resource is <strong>defaultButton</strong>. Pressing Return anywhere in the <em>xmessage</em> window will activate the default button. The default button has a wider border than the others.
    <dt><strong>-t <em>message</em></strong>
    <dd>Displays message. Any number of strings can be listed on the command line (each must be preceded with the <strong>-t</strong> option).
    <dt><strong>-file <em>filename</em></strong>
    <dd>Displays the file <em>filename.</em> All <strong>-t</strong> options will be ignored. A <em>filename</em> of `<em>-</em>' reads from standard input.
    <dt><strong>-icon <em>icontype</em></strong>
    <dd>Displays the icon <em>icontype</em> where icontype is one of: <em>info</em>, <em>error</em>, <em>question</em>, <em>warning</em>, <em>critical</em>. <em>action</em> is also accepted as a synonym for <em>error</em> for backward compatibility. <strong>pmquery</strong> introduces the additional <em>archive</em> and <em>host</em> icon types as well as the original <strong>xconfirm</strong> types listed earlier.
    <dt><strong>-font <em>fontname</em></strong>
    <dd>Use fontname as the font. This option is only available when using the X Window System.
    <dt><strong>-header <em>string</em></strong>
    <dd>Use string as the window title.
    <dt><strong>-print</strong>
    <dd>This causes the program to write the label of the button pressed to standard output. It is the default behaviour for <strong>pmconfirm</strong> and <strong>pmquery</strong>.
    <dt><strong>-noprint</strong>
    <dd>This causes the program to not write the label of the button pressed to standard output. It is the default behaviour for <strong>pmmessage</strong>.
    <dt><strong>-geometry <em>geometry-string</em></strong>
    <dd>This provides xconfirm with an X-compatible geometry string specification. This option is only available when using the X Window System.
    <dt><strong>-useslider</strong>
    <dd>When displaying a file, always use a slider instead of determining automatically whether a slider is necessary.
    <dt><strong>-noslider</strong>
    <dd>Do not create a slider, and clip text to the window size, instead of determining automatically whether a slider is necessary..
    <dt><strong>-noframe</strong>
    <dd>Do not display a frame around the contents.
    <dt><strong>-exclusive</strong>
    <dd>Grab the keyboard/pointer and do not allow further input until a button is pressed.
    <dt><strong>-timeout <em>secs</em></strong>
    <dd>Exit with status 0 after <em>secs</em> seconds if the user has not clicked on a button yet. The corresponding resource is <strong>timeout</strong>.
  </dl>
</section>
<section>
  <h2>EXAMPLES</h2>
  <p>The following shell script will display a window with an information icon, asking the user a yes or no question with "Yes" as the default.
  <pre> #! /bin/sh
 case `pmquery -t "Really power down?" -b No -B Yes -icon question
 in
   Yes) shutdown;;
   No) ;;
 esac</pre>
  <p>A second example, which prompts for a hostname then starts a terminal with an ssh session connected to the requested host.
  <pre> #! /bin/sh
 host=`pmquery -input -icon host -b Cancel -B OK \
               -header "Remote Terminal - Secure Shell"
 [ "$host" = "Cancel" -o -z "$host" ] &amp;& exit
 gnome-terminal -e "ssh $host"</pre>
</section>
<section>
  <h2>ENVIRONMENT</h2>
  <p><strong>pmquery</strong> is an excellent choice of utility for the "PCP_XCONFIRM_PROG" Performance Co-Pilot configuration parameter (refer to <strong>pcp.conf</strong>(5) for details).
  <p>Note that PCP_XCONFIRM_PROG will be automatically set to <strong>pmquery</strong> inside tools like <strong>pmchart</strong>, unless PCP_XCONFIRM_PROG is already set in the environment.
</section>
<section>
  <h2>EXIT STATUS</h2>
  <p>If it detects an error, <strong>pmquery</strong> always returns 1, so this value should not be associated with a button. Unless <em>-button</em> option has not been used, the return code will be zero on success.
</section>
<section>
  <h2>SEE ALSO</h2>
  <p><strong>pmchart</strong>(1), <strong>xconfirm</strong>(1), <strong>xmessage</strong>(1), <strong>pcp.conf</strong>(5).
</section>

