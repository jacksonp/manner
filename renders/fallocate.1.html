<!DOCTYPE html>
<meta charset="utf-8">
<meta name="man-page-info" data-extra1="April 2014" data-extra2="util-linux" data-extra3="User Commands">
<title>FALLOCATE</title>
<h1>FALLOCATE</h1>
<section>
  <h2>NAME</h2>
  <p>fallocate - preallocate or deallocate space to a file
</section>
<section>
  <h2>SYNOPSIS</h2>
  <p><strong>fallocate</strong> [<strong>-c</strong>|<strong>-p</strong>|<strong>-z</strong>] [<strong>-o</strong> <em>offset</em>] <strong>-l</strong> <em>length</em> [<strong>-n</strong>] <em>filename</em>
  <p><strong>fallocate -d</strong> [<strong>-o</strong> <em>offset</em>] [<strong>-l</strong> <em>length</em>] <em>filename</em>
</section>
<section>
  <h2>DESCRIPTION</h2>
  <p><strong>fallocate</strong> is used to manipulate the allocated disk space for a file, either to deallocate or preallocate it. &nbsp;For filesystems which support the fallocate system call, preallocation is done quickly by allocating blocks and marking them as uninitialized, requiring no IO to the data blocks. &nbsp;This is much faster than creating a file by filling it with zeroes.
  <p>The exit code returned by <strong>fallocate</strong> is 0 on success and 1 on failure.
</section>
<section>
  <h2>OPTIONS</h2>
  <p>The <em>length</em> and <em>offset</em> arguments may be followed by the multiplicative suffixes KiB (=1024), MiB (=1024*1024), and so on for GiB, TiB, PiB, EiB, ZiB and YiB (the "iB" is optional, e.g., "K" has the same meaning as "KiB") or the suffixes KB (=1000), MB (=1000*1000), and so on for GB, TB, PB, EB, ZB and YB.
  <p>The options <strong>--collapse-range</strong>, <strong>--dig-holes</strong>, <strong>--punch-hole</strong> and <strong>--zero-range</strong> are mutually exclusive.
  <dl>
    <dt><strong>-c</strong>, <strong>--collapse-range</strong>
    <dd>
      <p>Removes a byte range from a file, without leaving a hole. &nbsp;The byte range to be collapsed starts at <em>offset</em> and continues for <em>length</em> bytes. &nbsp;At the completion of the operation, the contents of the file starting at the location <em>offset</em>+<em>length</em> will be appended at the location <em>offset</em>, and the file will be <em>length</em> bytes smaller. &nbsp;The option <strong>--keep-size</strong> may not be specified for the collapse-range operation.
      <p>Available since Linux 3.15 for ext4 (only for extent-based files) and XFS.
    <dt><strong>-d</strong>, <strong>--dig-holes</strong>
    <dd>
      <p>Detect and dig holes. &nbsp;This makes the file sparse in-place, without using extra disk space. &nbsp;The minimum size of the hole depends on filesystem I/O block size (usually 4096 bytes). &nbsp;Also, when using this option, <strong>--keep-size</strong> is implied. &nbsp;If no range is specified by <strong>--offset</strong> and <strong>--length</strong>, then the entire file is analyzed for holes.
      <p>You can think of this option as doing a "<strong>cp --sparse</strong>" and then renaming the destination file to the original, without the need for extra disk space.
      <p>See <strong>--punch-hole</strong> for a list of supported filesystems.
    <dt><strong>-l</strong>, <strong>--length</strong> <em>length</em>
    <dd>
      <p>Specifies the length of the range, in bytes.
    <dt><strong>-n</strong>, <strong>--keep-size</strong>
    <dd>
      <p>Do not modify the apparent length of the file. &nbsp;This may effectively allocate blocks past EOF, which can be removed with a truncate.
    <dt><strong>-o</strong>, <strong>--offset</strong> <em>offset</em>
    <dd>
      <p>Specifies the beginning offset of the range, in bytes.
    <dt><strong>-p</strong>, <strong>--punch-hole</strong>
    <dd>
      <p>Deallocates space (i.e., creates a hole) in the byte range starting at <em>offset</em> and continuing for <em>length</em> bytes. &nbsp;Within the specified range, partial filesystem blocks are zeroed, and whole filesystem blocks are removed from the file. &nbsp;After a successful call, subsequent reads from this range will return zeroes. &nbsp;This option may not be specified at the same time as &nbsp;the <strong>--zero-range</strong> option. Also, when using this option, <strong>--keep-size</strong> is implied.
      <p>Supported for XFS (since Linux 2.6.38), ext4 (since Linux 3.0), Btrfs (since Linux 3.7) and tmpfs (since Linux 3.5).
    <dt><strong>-v</strong>, <strong>--verbose</strong>
    <dd>
      <p>Enable verbose mode.
    <dt><strong>-z</strong>, <strong>--zero-range</strong>
    <dd>
      <p>Zeroes space in the byte range starting at <em>offset</em> and continuing for <em>length</em> bytes. &nbsp;Within the specified range, blocks are preallocated for the regions that span the holes in the file. &nbsp;After a successful call, subsequent reads from this range will return zeroes.
      <p>Zeroing is done within the filesystem preferably by converting the range into unwritten extents. &nbsp;This approach means that the specified range will not be physically zeroed out on the device (except for partial blocks at the either end of the range), and I/O is (otherwise) required only to update metadata.
      <p>Option <strong>--keep-size</strong> can be specified to prevent file length modification.
      <p>Available since Linux 3.14 for ext4 (only for extent-based files) and XFS.
    <dt><strong>-V</strong>, <strong>--version</strong>
    <dd>
      <p>Display version information and exit.
    <dt><strong>-h</strong>, <strong>--help</strong>
    <dd>
      <p>Display help text and exit.
  </dl>
</section>
<section>
  <h2>AUTHORS</h2>
  <p><a href="mailto:sandeen@redhat.com">Eric Sandeen</a><br>
  <a href="mailto:kzak@redhat.com">Karel Zak</a>
</section>
<section>
  <h2>SEE ALSO</h2>
  <p><strong>fallocate</strong>(2), <strong>posix_fallocate</strong>(3), <strong>truncate</strong>(1)
</section>
<section>
  <h2>AVAILABILITY</h2>
  <p>The fallocate command is part of the util-linux package and is available from <a href="ftp://ftp.kernel.org/pub/linux/utils/util-linux/">Linux Kernel Archive</a>.
</section>

