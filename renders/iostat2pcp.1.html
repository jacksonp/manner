<!DOCTYPE html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="man-page-info" data-extra1="PCP" data-extra2="Performance Co-Pilot" data-extra3="">
<title>IOSTAT2PCP</title>
<h1>IOSTAT2PCP</h1>
<section>
  <h2>NAME</h2>
  <p><strong>iostat2pcp</strong> - import iostat data and create a PCP archive
</section>
<section>
  <h2>SYNOPSIS</h2>
  <p><strong>iostat2pcp</strong> [<strong>-v</strong>] [<strong>-S</strong> <em>start</em>] [<strong>-t</strong> <em>interval</em>] [<strong>-Z</strong> <em>timezone</em>] <em>infile</em> <em>outfile</em>
</section>
<section>
  <h2>DESCRIPTION</h2>
  <p><strong>iostat2pcp</strong> reads a text file created with <strong>iostat</strong>(1) (<em>infile</em>) and translates this into a Performance Co-Pilot (PCP) archive with the basename <em>outfile</em>. If <em>infile</em> is - then <em>iostat2pcp</em> reads from standard input, allowing easy preprocessing of the <em>iostat</em>(1) output with <em>sed</em>(1) or similar.
  <p>The resultant PCP archive may be used with all the PCP client tools to graph subsets of the data using <strong>pmchart</strong>(1), perform data reduction and reporting, filter with the PCP inference engine <strong>pmie</strong>(1), etc.
  <p>A series of physical files will be created with the prefix <em>outfile</em>. These are <em>outfile</em><strong>.0</strong> (the performance data), <em>outfile</em><strong>.meta</strong> (the metadata that describes the performance data) and <em>outfile</em><strong>.index</strong> (a temporal index to improve efficiency of replay operations for the archive). If any of these files exists already, then <strong>iostat2pcp</strong> will <strong>not</strong> overwrite them and will exit with an error message.
  <p>The first output sample from <em>iostat</em>(1) contains a statistical summary since boot time and is ignored by <em>iostat2pcp</em>, so the first real data set is the second one in the <em>iostat</em>(1) output.
  <p>The best results are obtained when <em>iostat</em>(1) was run with its own <strong>-t</strong> flag, so each output sample is prefixed with a timestamp. Even better is <strong>-t</strong> with $<strong>S_TIME_FORMAT=ISO</strong> set in environment when <em>iostat</em>(1) is run, in which case the timestamp includes the timezone.
  <p>Note that if $<strong>S_TIME_FORMAT=ISO</strong> is <strong>not</strong> used with the <strong>-t</strong> option then <em>iostat</em>(1) may produce a timestamp controlled by <strong>LC_TIME</strong> from the locale that is in a format <em>iostat2pcp</em> cannot parse. The formats for the timestamp that <em>iostat2pcp</em> accepts are illustrated by these examples:
  <dl class="indent-4">
    <dt><strong>2013-07-06T21:34:39+1000</strong>
    <dd>(for the $<strong>S_TIME_FORMAT=ISO</strong>).
    <dt><strong>2013-07-06 21:34:39</strong>
    <dd>(for some of the European formats, e.g. de_AT, de_BE, de_LU and en_DK.utf8).
    <dt><strong>06/07/13 21:34:39</strong>
    <dd>(for all of the $<strong>LC_TIME</strong> settings for English locales outside North America, e.g. en_AU, en_GB, en_IE, en_NZ, en_SG and en_ZA, and all the Spanish locales, e.g. es_ES, es_MX and es_AR).
  </dl>
  <p>In particular, note that some common North American $<strong>LC_TIME</strong> settings will <strong>not</strong> work with <em>iostat2pcp</em> (namely, en_US, POSIX and C) because they use the MM/DD format which may be incorrectly converted with the assumed DD/MM format. This is another reason to recommend setting $<strong>S_TIME_FORMAT=ISO</strong>.
  <p>If there are no timestamps in the input stream, <em>iostat2pcp</em> will try and deduce the sample interval if basic Disk data (<strong>-d</strong> option for <em>iostat</em>(1)) is found. If this fails, then the <strong>-t</strong> option may be used to specify the sample <em>interval</em> in seconds. This option is ignored if timestamps are found in the input stream.
  <p>The <strong>-S</strong> option may be used to specify as start time for the first real sample in <em>infile</em>, where <em>start</em> must have the format HH:MM:SS. This option is ignored if timestamps are found in the input stream.
  <p>The <strong>-Z</strong> option may be used to specify a timezone. It must have the format +HHMM (for hours and minutes East of UTC) or -HHMM (for hours and minutes West of UTC). Note in particular that <strong>neither</strong> the <strong>zoneinfo</strong> (aka Olson) format, e.g. Europe/Paris, nor the Posix <strong>TZ</strong> format, e.g. EST+5 is allowed for the <strong>-Z</strong> option. This option is ignored if ISO timestamps are found in the input stream. If the timezone is not specified and cannot be deduced, it defaults to UTC.
  <p>Some additional diagnostic output is generated with the <strong>-v</strong> option.
  <p><strong>iostat2pcp</strong> is a Perl script that uses the PCP::LogImport Perl wrapper around the PCP <em>libpcp_import</em> library, and as such could be used as an example to develop new tools to import other types of performance data and create PCP archives.
</section>
<section>
  <h2>CAVEAT</h2>
  <p><strong>iostat2pcp</strong> requires <em>infile</em> to have been created by the version of <strong>iostat</strong>(1) from &lt;http://freshmeat.net/projects/sysstat&gt;.
  <p><strong>iostat2pcp</strong> handles the <strong>-c</strong> (CPU), <strong>-d</strong> (Disk), <strong>-x</strong> (eXtended Disk) and <strong>-p</strong> (Partition) report formats (including their <strong>-k</strong>, <strong>-m</strong>, <strong>-z</strong> and <strong>ALL</strong> variants), but does not accommodate the <strong>-n</strong> (Network Filesystem) report format from <strong>iostat</strong>(1); this is a demand-driven limitation rather than a technical limitation.
</section>
<section>
  <h2>PCP ENVIRONMENT</h2>
  <p>Environment variables with the prefix <strong>PCP_</strong> are used to parameterize the file and directory names used by PCP. On each installation, the file <em>/etc/pcp.conf</em> contains the local values for these variables. The <strong>$PCP_CONF</strong> variable may be used to specify an alternative configuration file, as described in <strong>pcp.conf</strong>(5).
</section>
<section>
  <h2>SEE ALSO</h2>
  <p><strong>iostat</strong>(1), <strong>pmchart</strong>(1), <strong>pmie</strong>(1), <strong>pmlogger</strong>(1), <strong>sed</strong>(1), <strong>Date::Format</strong>(3pm), <strong>Date::Parse</strong>(3pm), <strong>PCP::LogImport</strong>(3pm) and <strong>LOGIMPORT</strong>(3).
</section>

