<!DOCTYPE html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="man-page-info" data-extra1="PCP" data-extra2="Performance Co-Pilot" data-extra3="">
<title>PMIECONF</title>
<h1>PMIECONF</h1>
<section>
  <h2>NAME</h2>
  <p><strong>pmieconf</strong> - display and set configurable pmie rule variables
</section>
<section>
  <h2>SYNOPSIS</h2>
  <p><strong>pmieconf</strong> [<strong>-cFv</strong>] [<strong>-f</strong> <em>file</em>] [<strong>-r</strong> <em>rulepath</em>] [<em>command</em> [<em>args...</em>]]
</section>
<section>
  <h2>DESCRIPTION</h2>
  <p><strong>pmieconf</strong> is a utility for viewing and configuring variables from generalized <strong>pmie</strong>(1) rules. The set of generalized rules is read in from <em>rulepath</em>, and the output <em>file</em> produced by <strong>pmieconf</strong> is a valid input file for <strong>pmie</strong>.
  <p>A brief description of the <strong>pmieconf</strong> command line options follows:
  <dl class="indent-8">
    <dt><strong>-c</strong>
    <dd>When run from automated <strong>pmie</strong> setup processes, this option is used to add a specific message and timestamp indicating that this is the case. It is not appropriate when using the tool interactively.
    <dt><strong>-f</strong> <em>file</em>
    <dd>Any rule modifications resulting from <strong>pmieconf</strong> manipulation of variable values will be written to <em>file</em>. The default value of <em>file</em> is dependent on the user ID - for the root user, the file <em>$PCP_VAR_DIR/config/pmieconf/config.pmie</em> is used, for other users the default is <em>$HOME/.pcp/pmie/config.pmie</em>.
    <dt><strong>-F</strong>
    <dd>Forces the <strong>pmieconf</strong> output <em>file</em> to be created (or updated), after which <strong>pmieconf</strong> immediately exits.
    <dt><strong>-r</strong> <em>rulepath</em>
    <dd>Allows the source of generalized <strong>pmie</strong> rules to be changed - <em>rulepath</em> is a colon-delimited list of <strong>pmieconf</strong>(5) rule files and/or subdirectories. The default value for <em>rulepath</em> is <em>$PCP_VAR_DIR/config/pmieconf</em>. Use of this option overrides the <strong>PMIECONF_PATH</strong> environment variable which has a similar function.
    <dt><strong>-v</strong>
    <dd>Verbose mode. Additional information associated with each rule and its associated variables will be displayed. This is the complete list of variables which affects any given rule (by default, global variables are not displayed with the rule).
  </dl>
  <p>The <strong>pmieconf</strong> <em>command</em>s allow information related to the various rules and configurable variables to be displayed or modified. If no <strong>pmieconf</strong> <em>command</em>s are presented on the command line, <strong>pmieconf</strong> prompts for <em>command</em>s interactively.
  <p>The <strong>pmieconf</strong> <em>command</em> language is described here:
  <dl class="indent-8">
    <dt><strong>help [ { . | all | global | &lt;rule&gt; | &lt;group&gt; } [&lt;variable&gt;] ]</strong>
    <dd>Without arguments, the <strong>help</strong> command displays the syntax for all of the available <strong>pmieconf</strong> commands. With one argument, a description of one or more of the generalized rules is displayed. With two arguments, a description of a specific variable relating to one or more of the generalized rules is displayed.
    <dt><strong>rules [ enabled | disabled ]</strong>
    <dd>Display the name and short summary for all of the generalized rules found on <em>rulepath</em>. Each of the rule names can be used in place of the keyword <strong>&lt;rule&gt;</strong> in this command syntax description. The <strong>enabled</strong> and <strong>disabled</strong> options can be used to filter the set of rules displayed to just those which are enabled or disabled respectfully.
    <dt><strong>groups</strong>
    <dd>Display the name of all of the rule groups that were found on <em>rulepath</em>. Each of the group names can be used in place of the keyword <strong>&lt;group&gt;</strong> in this command syntax description, which applies the command to all rules within the rule group.
    <dt><strong>status</strong>
    <dd>Display status information relating to the current <strong>pmieconf</strong> session, including a list of running <strong>pmie</strong> processes which are currently using <em>file</em>.
    <dt><strong>enable { . | all | &lt;rule&gt; | &lt;group&gt; }</strong>
    <dd>Enables the specified rule or group of rules. An enabled rule is one which will be included in the <strong>pmie</strong> configuration file generated by <strong>pmieconf</strong>. Any enabled "actions" will be appended to the rule's "predicate", in a manner conforming to the <strong>pmie</strong> syntax ("actions" can be viewed using the <strong>list global</strong> command, described below).
    <dt><strong>disable { . | all | &lt;rule&gt; | &lt;group&gt; }</strong>
    <dd>Disables the specified rule or group of rules. If the rule was previously enabled, it will be removed from the <strong>pmie</strong> configuration file generated by <strong>pmieconf</strong>, and hence no longer evaluated when <strong>pmie</strong> is restarted (using <strong>pmieconf</strong> does not affect any existing <strong>pmie</strong> processes using <em>file</em>).
    <dt><strong>list { . | all | global | &lt;rule&gt; | &lt;group&gt; } [&lt;variable&gt;]</strong>
    <dd>Display the values for a specific rule variable; or for all variables of a rule, a rule group, all rules, or the global variables.
    <dt><strong>modify { . | all | global | &lt;rule&gt; | &lt;group&gt; } &lt;variable&gt; &lt;value&gt;</strong>
    <dd>Enable, disable, or otherwise change the value for one or more rule variables. This value must be consistent with the type of the variable, which can be inferred from the format of the printed value - e.g. strings will be enclosed in double-quotes, percentages have the ``%'' symbol appended, etc. Note that certain rule variables cannot be modified through <strong>pmieconf</strong> - "predicate" and "help", for example.
    <dt><strong>undo { . | all | global | &lt;rule&gt; | &lt;group&gt; } [&lt;variable&gt;]</strong>
    <dd>Applicable only to a variable whose value has been modified - this <em>command</em> simply reverts to the default value for the given variable.
    <dt><strong>quit</strong>
    <dd>Save any changes made to <em>file</em> and then exit <strong>pmieconf</strong>.
    <dt><strong>abort</strong>
    <dd>Exit <strong>pmieconf</strong> immediately without saving any changes to <em>file</em>.
  </dl>
  <p>Each of the commands above can be shortened by simply using the first character of the command name, and also ``?'' for help.
  <p>Use of the <strong>all</strong> keyword causes the command to be applied to all of the rules. The <strong>global</strong> keyword refers to those variables which are applied to every rule. Such variables can be changed either globally or locally, for example:
  <pre>  pmieconf&gt; modify global delta "5 minutes"
  pmieconf&gt; modify memory delta "1 minute"</pre>
  <p>causes all rules to now be evaluated once every five minutes, except for rules in the "memory" group which are to be evaluated once per minute.
  <p>The ``.'' character is special to <strong>pmieconf</strong> - it refers to the last successfully used value of <strong>all</strong>, <strong>global</strong>, <strong>&lt;rule&gt;</strong> or <strong>&lt;group&gt;</strong>.
</section>
<section>
  <h2>EXAMPLES</h2>
  <p>Specify that all of the rules in the "memory" group should be evaluated:
  <pre>  pmieconf&gt; modify memory enabled yes</pre>
  <p>Change your mind, and revert to using only the "memory" rules which were enabled by default:
  <pre>  pmieconf&gt; undo memory enabled</pre>
  <p>Specify that notification of rules which evaluate to true should be sent to <strong>syslogd</strong>(1):
  <pre>  pmieconf&gt; modify global syslog_action yes</pre>
  <p>Specify that rules in the "per_cpu" group should use a different holdoff value to other rules:
  <pre>  pmieconf&gt; help global holdoff
    rule: global  [generic parameters applied to all rules]
     var: holdoff
    help: Once the predicate is true and the action is executed,
          this variable allows suppression of further action
          execution until the specified interval has elapsed.
          A value of zero enables execution of the action if
          the rule predicate is true at the next sample. Default
          units are seconds and common units are "second", "sec",
          "minute", "min" and "hour".

  pmieconf&gt; modify per_cpu holdoff "1 hour"</pre>
  <p>Lower the threshold associated with a particular variable for a specified rule:
  <pre>  pmieconf&gt; l cpu.syscall predicate
    rule: cpu.syscall  [High aggregate system call rate]
      predicate = 
              some_host (
                  ( kernel.all.syscall $hosts$ )
                    &gt; $threshold$ count/sec * hinv.ncpu $hosts$
              )

  pmieconf&gt; m . threshold 7000

  pmieconf&gt; l . threshold
    rule: cpu.syscall  [High aggregate system call rate]
            threshold = 7000</pre>
</section>
<section>
  <h2>ENVIRONMENT</h2>
  <p>The environment variable <strong>PMIECONF_PATH</strong> has a similar function to the <strong>-r</strong> option described above, and if set will be used provided no <strong>-r</strong> option is presented.
</section>
<section>
  <h2>FILES</h2>
  <dl class="indent-10">
    <dt><em>$PCP_VAR_DIR/config/pmieconf/</em>*/*
    <dd>generalized system resource monitoring rules
    <dt><em>$PCP_VAR_DIR/config/pmieconf/config.pmie</em>
    <dd>default super-user settings for system resource monitoring rules
    <dt><em>$HOME/.pcp/pmie/config.pmie</em>
    <dd>default user settings for system resource monitoring rules
  </dl>
</section>
<section>
  <h2>PCP ENVIRONMENT</h2>
  <p>Environment variables with the prefix <strong>PCP_</strong> are used to parameterize the file and directory names used by PCP. On each installation, the file <em>/etc/pcp.conf</em> contains the local values for these variables. The <strong>$PCP_CONF</strong> variable may be used to specify an alternative configuration file, as described in <strong>pcp.conf</strong>(5).
</section>
<section>
  <h2>SEE ALSO</h2>
  <p><strong>PCPIntro</strong>(1), <strong>pmie</strong>(1), <strong>pmie_check</strong>(1) and <strong>pmieconf</strong>(5).
</section>

