<!DOCTYPE html>
<meta charset="utf-8">
<meta name="man-page-info" data-extra1="PCP" data-extra2="Performance Co-Pilot" data-extra3="">
<title>MKAF</title>
<h1>MKAF</h1>
<section>
  <h2>NAME</h2>
  <p><strong>mkaf</strong> - create a Performance Co-Pilot archive folio
</section>
<section>
  <h2>SYNOPSIS</h2>
  <p><strong>$PCP_BINADM_DIR/mkaf</strong> [<em>findopts</em>] <em>filename</em> ...
</section>
<section>
  <h2>DESCRIPTION</h2>
  <p>A collection of one or more Performance Co-Pilot (see <strong>PCPIntro</strong>(1)) archive logs may be combined with <strong>mkaf</strong> to produce a PCP archive folio and the associated archive folio control file. Some PCP tools use <strong>mkaf</strong> to create archive folios, e.g. &nbsp;the ``record'' facility in the <strong>pmchart</strong>(1) and <strong>pmview</strong>(1) tools, to facilitate playback with <strong>pmafm</strong>(1).
  <p><strong>mkaf</strong> processes each <em>filename</em> argument, and if this is a component file from a PCP archive &nbsp;that archive is added to the folio.
  <p>If <em>filename</em> is a directory, then this is searched recursively using <strong>find</strong>(1). Any <em>filename</em> argument beginning with a ``-'' is assumed to be a <strong>find</strong>(1) command line option (<em>findopts</em>); the default is <strong>-follow</strong> if no <em>findopts</em> are specified.
  <p>The first named archive in the folio is assumed to be associated with the default host for any tool that tries to replay multiple archives from the folio.
  <p>The folio control file is written to standard output, and has the following format.
  <dl>
    <dt>1.
    <dd>
      <p>The first line contains the word <strong>PCPFolio</strong>.
    <dt>2.
    <dd>
      <p>The second line contains the tag <strong>Version:</strong> followed by the format version number (currently 1).
    <dt>3.
    <dd>
      <p>For subsequent lines, blank lines and lines beginning with ``#'' are ignored.
    <dt>4.
    <dd>
      <p>The line beginning with the tag <strong>Created:</strong> documents where and when the folio was created.
    <dt>5.
    <dd>
      <p>The line beginning with the tag <strong>Creator:</strong> identifies the tool which created the folio (and is assumed to know how to replay the archive folio). If present, the second argument is the name of a configuration file that the creator tool could use to replay the archive folio, e.g. with the <strong>replay</strong> command for <strong>pmafm</strong>(1). In the case of <strong>mkaf</strong> (unlike <strong>pmchart</strong>(1) or <strong>pmview</strong>(1)) there is no knowledge of the contents of the archives, so the ``creator'' cannot replay the archive, however <strong>pmchart</strong>(1) is able to replay any archive, and so this tool is identified as the <strong>Creator:</strong> for archive folios created by <strong>mkaf</strong>(1).
    <dt>6.
    <dd>
      <p>This is then followed by one or more lines beginning with the tag <strong>Archive:</strong> followed by the hostname and base name of the archive.
  </dl>
  <p>For example
  <p class="indent-ti-32">$ mkaf mydir/gonzo<br>
  might produce the following folio control file.
  <pre>PCPFolio
Version: 1
# use pmafm(1) to process this PCP archive folio
#
Created: on gonzo at Tue Jul  2 03:35:54 EST 1996
Creator: pmchart
#               Host                    Basename
#
Archive:        gonzo                   mydir/gonzo/960627
Archive:        gonzo                   mydir/gonzo/960628
Archive:        gonzo                   mydir/gonzo/960629
Archive:        gonzo                   mydir/gonzo/960630
Archive:        gonzo                   mydir/gonzo/960701
Archive:        gonzo                   mydir/gonzo/960701.00.10
Archive:        gonzo                   mydir/gonzo/960701.05.25
Archive:        gonzo                   mydir/gonzo/960702.00.10</pre>
</section>
<section>
  <h2>PCP ENVIRONMENT</h2>
  <p>Environment variables with the prefix <strong>PCP_</strong> are used to parameterize the file and directory names used by PCP. On each installation, the file <em>/etc/pcp.conf</em> contains the local values for these variables. The <strong>$PCP_CONF</strong> variable may be used to specify an alternative configuration file, as described in <strong>pcp.conf</strong>(5).
</section>
<section>
  <h2>SEE ALSO</h2>
  <p><strong>find</strong>(1), <strong>PCPIntro</strong>(1), <strong>pmafm</strong>(1), <strong>pmchart</strong>(1), <strong>pmview</strong>(1), <strong>pcp.conf</strong>(5) and <strong>pcp.env</strong>(5).
</section>
<section>
  <h2>DIAGNOSTICS</h2>
  <p>Some informational messages, warnings and pathological conditions are reported on standard error.
</section>

