<!DOCTYPE html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="man-page-info" data-extra1="July 2014" data-extra2="util-linux" data-extra3="User Commands">
<title>RUNUSER</title>
<h1>RUNUSER</h1>
<section>
  <h2>NAME</h2>
  <p>runuser - run a command with substitute user and group ID
</section>
<section>
  <h2>SYNOPSIS</h2>
  <p><strong>runuser</strong> [options] <strong>-u</strong> <em>user</em> <em>command</em> [<em>argument</em>...]
  <p><strong>runuser</strong> [options] [<strong>-</strong>] [<em>user</em> [<em>argument</em>...]]
</section>
<section>
  <h2>DESCRIPTION</h2>
  <p><strong>runuser</strong> allows to run commands with a substitute user and group ID. If the option <strong>-u</strong> is not given, it falls back to <strong>su</strong>-compatible semantics and a shell is executed. The difference between the commands <strong>runuser</strong> and <strong>su</strong> is that <strong>runuser</strong> does not ask for a password (because it may be executed by the root user only) and it uses a different PAM configuration. The command <strong>runuser</strong> does not have to be installed with suid permissions.
  <p>If the PAM session is not required then recommended solution is to use <strong>setpriv</strong>(1) command.
  <p>When called without arguments, <strong>runuser</strong> defaults to running an interactive shell as <em>root</em>.
  <p>For backward compatibility, <strong>runuser</strong> defaults to not change the current directory and to only set the environment variables <strong>HOME</strong> and <strong>SHELL</strong> (plus <strong>USER</strong> and <strong>LOGNAME</strong> if the target <em>user</em> is not root). This version of <strong>runuser</strong> uses PAM for session management.
</section>
<section>
  <h2>OPTIONS</h2>
  <dl>
    <dt><strong>-c</strong>, <strong>--command</strong>=<strong><em>command</em></strong>
    <dd>
      <p>Pass <em>command</em> to the shell with the <strong>-c</strong> option.
    <dt><strong>-f</strong>, <strong>--fast</strong>
    <dd>
      <p>Pass <strong>-f</strong> to the shell, which may or may not be useful depending on the shell.
    <dt><strong>-g</strong>, <strong>--group</strong>=<strong><em>group</em></strong>
    <dd>
      <p>The primary group to be used. This option is allowed for the root user only.
    <dt><strong>-G</strong>, <strong>--supp-group</strong>=<strong><em>group</em></strong>
    <dd>
      <p>Specify a supplemental group. This option is available to the root user only. The first specified supplementary group is also used as a primary group if the option <strong>--group</strong> is unspecified.
    <dt><strong>-</strong>, <strong>-l</strong>, <strong>--login</strong>
    <dd>
      <p>Start the shell as a login shell with an environment similar to a real login:
      <dl class="indent-10">
        <dt>o
        <dd>
          <p>clears all the environment variables except for <strong>TERM</strong>
        <dt>o
        <dd>
          <p>initializes the environment variables <strong>HOME</strong>, <strong>SHELL</strong>, <strong>USER</strong>, <strong>LOGNAME</strong>, <strong>PATH</strong>
        <dt>o
        <dd>
          <p>changes to the target user's home directory
        <dt>o
        <dd>
          <p>sets argv[0] of the shell to '<strong>-</strong>' in order to make the shell a login shell
      </dl>
    <dt><strong>-m</strong>, <strong>-p</strong>, <strong>--preserve-environment</strong>
    <dd>
      <p>Preserve the entire environment, i.e. it does not set <strong>HOME</strong>, <strong>SHELL</strong>, <strong>USER</strong> nor <strong>LOGNAME</strong>. The option is ignored if the option <strong>--login</strong> is specified.
    <dt><strong>-s</strong>, <strong>--shell</strong>=<strong><em>shell</em></strong>
    <dd>
      <p>Run the specified <em>shell</em> instead of the default. The shell to run is selected according to the following rules, in order:
      <dl class="indent-10">
        <dt>o
        <dd>
          <p>the shell specified with <strong>--shell</strong>
        <dt>o
        <dd>
          <p>the shell specified in the environment variable <strong>SHELL</strong> if the <strong>--preserve-environment</strong> option is used
        <dt>o
        <dd>
          <p>the shell listed in the passwd entry of the target user
        <dt>o
        <dd>
          <p>/bin/sh
      </dl>
      <p>If the target user has a restricted shell (i.e. not listed in /etc/shells) the <strong>--shell</strong> option and the <strong>SHELL</strong> environment variables are ignored unless the calling user is root.
    <dt><strong>--session-command=</strong><em>command</em>
    <dd>
      <p>Same as <strong>-c ,</strong> but do not create a new session. (Discouraged.)
    <dt><strong>-V</strong>, <strong>--version</strong>
    <dd>
      <p>Display version information and exit.
    <dt><strong>-h</strong>, <strong>--help</strong>
    <dd>
      <p>Display help text and exit.
  </dl>
</section>
<section>
  <h2>CONFIG FILES</h2>
  <p><strong>runuser</strong> reads the <em>/etc/default/runuser</em> and <em>/etc/login.defs</em> configuration files. The following configuration items are relevant for <strong>runuser</strong>:
  <p><strong>ENV_PATH</strong> (string)
  <div class="indent-4">
    <p>Defines the PATH environment variable for a regular user. The default value is <em>/usr/local/bin:/bin:/usr/bin</em>.
  </div>
  <p><strong>ENV_ROOTPATH</strong> (string)<br>
  <strong>ENV_SUPATH</strong> (string)
  <div class="indent-4">
    <p>Defines the PATH environment variable for root. The default value is <em>/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin</em>.
  </div>
  <p><strong>ALWAYS_SET_PATH</strong> (boolean)
  <div class="indent-4">
    <p>If set to <em>yes</em> and --login and --preserve-environment were not specified <strong>runuser</strong> initializes <strong>PATH</strong>.
  </div>
</section>
<section>
  <h2>EXIT STATUS</h2>
  <p><strong>runuser</strong> normally returns the exit status of the command it executed. If the command was killed by a signal, <strong>runuser</strong> returns the number of the signal plus 128.
  <p>Exit status generated by <strong>runuser</strong> itself:
  <dl class="indent-10">
    <dt>1
    <dd>
      <p>Generic error before executing the requested command
    <dt>126
    <dd>
      <p>The requested command could not be executed
    <dt>127
    <dd>
      <p>The requested command was not found
  </dl>
</section>
<section>
  <h2>FILES</h2>
  <dl class="indent-17">
    <dt>/etc/pam.d/runuser
    <dd>
      <p>default PAM configuration file
    <dt>/etc/pam.d/runuser-l
    <dd>
      <p>PAM configuration file if --login is specified
    <dt>/etc/default/runuser
    <dd>
      <p>runuser specific logindef config file
    <dt>/etc/login.defs
    <dd>
      <p>global logindef config file
  </dl>
</section>
<section>
  <h2>SEE ALSO</h2>
  <p><strong>pam</strong>(8), <strong>shells</strong>(5), <strong>login.defs</strong>(5), <strong>su</strong>(1), <strong>setpriv</strong>(1)
</section>
<section>
  <h2>HISTORY</h2>
  <p>This <strong>runuser</strong> command was derived from coreutils' <strong>su</strong>, which was based on an implementation by David MacKenzie, and the Fedora <strong>runuser</strong> command by Dan Walsh.
</section>
<section>
  <h2>AVAILABILITY</h2>
  <p>The runuser command is part of the util-linux package and is available from <a href="ftp://ftp.kernel.org/pub/linux/utils/util-linux/">Linux Kernel Archive</a>.
</section>

