<!DOCTYPE html>
<meta charset="utf-8">
<meta name="man-page-info" data-extra1="SGI" data-extra2="Performance Co-Pilot" data-extra3="">
<title>PMDUMPTEXT</title>
<h1>PMDUMPTEXT</h1>
<section>
  <h2>NAME</h2>
  <p><strong>pmdumptext</strong> - dump performance metrics to an ASCII table
</section>
<section>
  <h2>SYNOPSIS</h2>
  <p><strong>pmdumptext</strong> [<strong>-CFGHilmMNoruXz</strong>] [<strong>-A</strong> <em>align</em>] [<strong>-a</strong> <em>archive</em>[<strong>,</strong><em>archive</em><strong>,</strong>...]] [<strong>-c</strong> <em>config</em>] [<strong>-d</strong> <em>delimiter</em>] [<strong>-f</strong> <em>format</em>] [<strong>-h</strong> <em>host</em>] [<strong>-n</strong> <em>pmnsfile</em>] [<strong>-O</strong> <em>offset</em>] [<strong>-P</strong> <em>precision</em>] [<strong>-R</strong> <em>lines</em>] [<strong>-s</strong> <em>sample</em>] [<strong>-S</strong> <em>starttime</em>] [<strong>-t</strong> <em>interval</em>] [<strong>-T</strong> <em>endtime</em>] [<strong>-U</strong> <em>string</em>] [<strong>-w</strong> <em>width</em>] [<strong>-Z</strong> <em>timezone</em>] [<em>metric</em> ...]
</section>
<section>
  <h2>DESCRIPTION</h2>
  <p><strong>pmdumptext</strong> outputs the values of performance metrics collected live or from a set of Performance Co-Pilot (PCP) archives. By default, the metric values are displayed in tab separated columns, prefixed by a timestamp.
  <p>Unless directed to another host by the <strong>-h</strong> option, or to one or more sets of archives by the <strong>-a</strong> option, <strong>pmdumptext</strong> will contact <strong>pmcd</strong>(1) on the local host to obtain the required information.
  <p><strong>pmdumptext</strong> may be run in interactive mode with the <strong>-i</strong> option which displays the values in equal width columns. &nbsp;Without this option, no attempt is made to line up any values allowing the output to be easily parsed by other applications.
  <p>The format of the output can be further controlled by changing the precision of the values with <strong>-P</strong>, the width of the columns with <strong>-w</strong>, and the format of the values with the <strong>-G</strong> and <strong>-F</strong> options for the shortest of scientific or fixed digits, and a fixed width format, respectively.
  <p>The <em>metrics</em> to be dumped can be listed on the command line, in a <em>config</em> file, or piped to <strong>pmdumptext</strong> on <em>stdin</em>. A metric consists of an optional source (host or archive), the metric name, and an optional instance list immediately after the name. &nbsp;A colon is used to &nbsp;separate a host name from the metric, and a forward slash (``/'') to &nbsp;separate an archive name from the metric. &nbsp;Instances are enclosed in square &nbsp;brackets and a comma is used between each instance if more than one is stated. For example, some legal metrics are:
  <pre>kernel.all.cpu.idle
myhost:kernel.all.cpu.idle[cpu0,cpu3]
/path/to/myarchive/kernel.all.cpu.idle[cpu1]</pre>
  <p>The format of a metric is further described in <strong>PCPIntro</strong>(1). A normalization value may optionally follow a metric name in a <em>config</em> file or on <em>stdin</em>. The metric value will be scaled by this value. &nbsp;For example, if the file system ``/dev/root'' has a capacity of 1965437 bytes, then the percentage of the file system that is used could be dumped with this <em>config</em>:
  <pre>filesys.used[/dev/root] 19654.37</pre>
  <p>A normalization value may not be used with <em>metrics</em> specified as command line arguments.
  <p>A metric name is not required to be a leaf node in the Performance Metrics Name Space (PMNS), except when one or more instances are specified. For example, to dump all file system metrics, only <em>filesys</em> is required to dump <em>filesys.capacity</em>, <em>filesys.used</em>, <em>filesys.free</em> etc.
</section>
<section>
  <h2>COMMAND LINE OPTIONS</h2>
  <p>The command line options <strong>-A</strong>, <strong>-O</strong>, <strong>-S</strong> and <strong>-T</strong> control the alignment, offset, start and end time when visualizing metrics from archives. &nbsp;These options are common to most Performance Co-Pilot tools and are fully described in <strong>PCPIntro</strong>(1).
  <p>The other available options are:
  <dl>
    <dt><strong>-a</strong>
    <dd>
      <p>Specify a set of <em>archive</em> from which metrics can be obtained for a particular host. &nbsp; <em>archive</em> is the name of a directory containing archives, or the basename of an archive, previously created by <strong>pmlogger</strong>(1). Multiple sets of archives (separated by commas or in different <strong>-a</strong> options) from different hosts may be given, but only one set of archives per host is permitted. &nbsp;Any metrics that are not associated with a specific host or archive will use the first archive as their source.
    <dt><strong>-C</strong>
    <dd>
      <p>Exit before dumping any values, but after parsing the metrics. &nbsp;Metrics, instances, normals and units are listed if <strong>-m</strong>, <strong>-l</strong>, <strong>-N</strong> and/or <strong>-u</strong> are specified.
    <dt><strong>-c</strong>
    <dd>
      <p>If no <em>metrics</em> are listed on the command line, a <em>config</em> file can be used to specify the <em>metrics</em> to be dumped. Unlike the command line <em>metrics</em>, each metric may be followed by a normalization value. &nbsp;Empty lines and lines that begin with ``#'' are ignored.
    <dt><strong>-d</strong>
    <dd>
      <p>Specify the <em>delimiter</em> that separates each column of output. &nbsp;The <em>delimiter</em> may only be a single character.
    <dt><strong>-f</strong>
    <dd>
      <p>Use the <em>format</em> string for formatting the timestamp with each set of values. &nbsp;The syntax of this string is the same as that described in <strong>strftime</strong>(3). An empty <em>format</em> string (eg. '') will remove the timestamps from the output.
    <dt><strong>-F</strong>
    <dd>
      <p>Output the values in a fixed width format of 6 characters. &nbsp;Positive numbers are represented as <em>dd</em>.<em>dd</em><strong>u</strong> and negative numbers as <strong>[</strong>-<strong>]</strong><em>d</em>.<em>dd</em><strong>u</strong>. &nbsp;The postfix multiplier may have the values <strong>K</strong>(10^3), <strong>M</strong>(10^6), <strong>G</strong>(10^9) and <strong>T</strong>(10^12). For example, 4567 would be displayed as 4.57K, even if the units of the metric are bytes.
    <dt><strong>-G</strong>
    <dd>
      <p>Output the values using the shortest of a scientific format or a decimal notation.
    <dt><strong>-h</strong>
    <dd>
      <p>Fetch performance metrics from <strong>pmcd</strong>(1) on <em>host</em>, rather than the default localhost.
    <dt><strong>-H</strong>
    <dd>
      <p>Show all headers before dumping any metric values. &nbsp;This is equivalent to <strong>-lmNu</strong>.
    <dt><strong>-i</strong>
    <dd>
      <p>Output the data in fixed width columns using fixed width values (see <strong>-F</strong>) so that it is human-readable. &nbsp;This option may not be used with <strong>-P</strong> as fixed point values are not fixed width. &nbsp;This option will also affect the output of <strong>-m</strong> and <strong>-u</strong> options as the metric, instance and unit names will be truncated.
    <dt><strong>-l</strong>
    <dd>
      <p>Show the source of the metrics. &nbsp;In interactive mode, the host of the metrics is shown. &nbsp;In non-interactive mode, this option shows the source of the metrics with the metric name even if <strong>-m</strong> is not specified.
    <dt><strong>-m</strong>
    <dd>
      <p>Output the metric names before the metric values. &nbsp;The source and units of &nbsp;the metrics may also be dumped with the <strong>-l</strong> and <strong>-u</strong> options &nbsp;respectively. &nbsp;If in interactive mode, the metrics names may be truncated, and the instance names, where relevant, are also truncated on the follow line.
    <dt><strong>-M</strong>
    <dd>
      <p>Output the column number and complete metric names before dumping any values. If the <strong>-l</strong> flag is also specified, the source of the metrics is also shown.
    <dt><strong>-n</strong>
    <dd>
      <p>Load an alternative local PMNS from the file <em>pmnsfile.</em>
    <dt><strong>-o</strong>
    <dd>
      <p>When a timestamp is being reported (ie. unless an empty format string is given with the <strong>-f</strong> option), the timestamp is prefixed with the offset in seconds from the start of the set of archives or the beginning of the execution of <strong>pmdumptext</strong>.
    <dt><strong>-N</strong>
    <dd>
      <p>Output the normalization factors before the metric values.
    <dt><strong>-P</strong>
    <dd>
      <p>Set the <em>precision</em> of the values. &nbsp;This option may not be used with <strong>-F</strong> as the precision is constant. &nbsp;The default precision is 3.
    <dt><strong>-r</strong>
    <dd>
      <p>Output the raw metric values, do not convert counters to rates. &nbsp;This option also causes <strong>pmdumptext</strong> to ignore the normalization values for each metric.
    <dt><strong>-R</strong>
    <dd>
      <p>Repeat the header every <em>lines</em> of output. &nbsp;This option is useful in interactive mode when using a graphical window to avoid the header scrolling beyond the window's buffer, and to realign the header if the window is resized.
    <dt><strong>-s</strong>
    <dd>
      <p><strong>pmdumptext</strong> will terminate after this many samples.
    <dt><strong>-t</strong>
    <dd>
      <p>The <em>interval</em> argument follows the syntax described in <strong>PCPIntro</strong>(1), and in the simplest form may be an unsigned integer (the implied units in this case are seconds). The default interval is 1.0 seconds.
    <dt><strong>-u</strong>
    <dd>
      <p>Output the units of the metrics before the first values, but after the metric names if <strong>-m</strong> is also specified.
    <dt><strong>-U</strong>
    <dd>
      <p>Change the output when values are unavailable to <em>string</em>. The default string is ``?''.
    <dt><strong>-w</strong>
    <dd>
      <p>Set the column width of the output. &nbsp;Strings will be truncated to this width, and maybe postfixed by ``...'' if the <em>width</em> is greater than 5.
    <dt><strong>-X</strong>
    <dd>
      <p>Output the column number and complete metric names, one-per-line, both before dumping the first set of values and again each time the header is repeated.
    <dt><strong>-z</strong>
    <dd>
      <p>Use the local timezone of the host that is the source of the &nbsp;performance metrics, as identified by either the <strong>-h</strong> or the first <strong>-a</strong> options. The default is to use the timezone of the local host.
    <dt><strong>-Z</strong>
    <dd>
      <p>Use <em>timezone</em> when displaying the date and time. <em>Timezone</em> is in the format of the environment variable <strong>TZ</strong> as described in <strong>environ</strong>(7).
  </dl>
</section>
<section>
  <h2>MULTIPLE SOURCES</h2>
  <p><strong>pmdumptext</strong> supports the dumping of metrics from multiple hosts or set of archives. &nbsp;The metrics listed on the command line or in the <em>config</em> file may have no specific source or come from different sources.
  <p>However, restrictions apply when archives are specified on the command line (<strong>-a</strong>) and/or in the configuration file. &nbsp;Firstly, there may be only one set of archives for any one host. &nbsp;Secondly, the hosts of any metrics with host sources must correspond to the host of a set of archives, either on the command line or previously as the source of another metric.
  <p>The options <strong>-a</strong> and <strong>-h</strong> may not be used together.
</section>
<section>
  <h2>UNIT CONVERSION</h2>
  <p>All metrics that have the semantics of counters are automatically converted to rates over the sample time interval. &nbsp;In interactive mode, <strong>pmdumptext</strong> will also change the units of some metrics so that they are easier to comprehend:
  <ul>
    <li>All metrics with space units (bytes to terabytes) are scaled to bytes. &nbsp;Note that 1024 bytes with be represented as 1.02K, not 1.00K.
    <li>Metrics that are counters with time units (nanoseconds to hours) represent time utilization over the sample interval. &nbsp;The unit strings of such metrics is changed to ``Time Utilization'' or abbreviated to ``util'' and the values are normalized to the range zero to one.
  </ul>
</section>
<section>
  <h2>EXAMPLES</h2>
  <p>o To examine the load on two hosts foo and bar, simultaneously:
  <pre>$ pmdumptext -il 'foo:kernel.all.load[1]' 'bar:kernel.all.load[1]'
             Source        foo     bar
Wed Jul 30 11:37:53      0.309   0.409
Wed Jul 30 11:37:54      0.309   0.409
Wed Jul 30 11:37:55      0.309   0.409</pre>
  <p>o To output the memory utilization on a remote host called bong with a simpler timestamp:
  <pre>$ pmdumptext -imu -h bong -f '%H:%M:%S' mem.util
  Metric        kernel  fs_ctl  _dirty  _clean    free    user
   Units             b       b       b       b       b       b
09:32:28         8.98M   0.97M   0.00    3.90M   7.13M  46.13M
09:32:29         8.99M   0.98M   0.00    5.71M   5.39M  46.03M
09:32:30         8.99M   1.07M   0.00    5.81M   4.55M  46.69M
09:32:31         9.03M   1.16M   0.00    6.45M   3.48M  47.00M
09:32:32         9.09M   1.18M  20.48K   6.23M   3.29M  47.30M</pre>
  <p>o To dump all metrics collected in an archive at a 30 second interval to a file for processing by another tool:
  <pre>$ pminfo -a archive | pmdumptext -t 30s -m -a archive &gt; outfile</pre>
</section>
<section>
  <h2>FILES</h2>
  <dl>
    <dt><strong>$PCP_VAR_DIR/pmns/*</strong>
    <dd>
      <p>default PMNS specification files
  </dl>
</section>
<section>
  <h2>PCP ENVIRONMENT</h2>
  <p>Environment variables with the prefix <strong>PCP_</strong> are used to parameterize the file and directory names used by PCP. On each installation, the file <em>/etc/pcp.conf</em> contains the local values for these variables. The <strong>$PCP_CONF</strong> variable may be used to specify an alternative configuration file, as described in <strong>pcp.conf</strong>(5).
</section>
<section>
  <h2>SEE ALSO</h2>
  <p><strong>pmchart</strong>(1), <strong>pmtime</strong>(1), <strong>PCPIntro</strong>(1), <strong>pmcd</strong>(1), <strong>pmlogger</strong>(1), <strong>pmlogextract</strong>(1), <strong>pmrep</strong>(1), <strong>pmval</strong>(1), <strong>PMAPI</strong>(3), <strong>strftime</strong>(3) and <strong>environ</strong>(7).
</section>

