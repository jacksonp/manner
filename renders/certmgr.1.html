<!DOCTYPE html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="man-page-info" data-extra1="" data-extra2="" data-extra3="">
<title>Mono</title>
<h1>Mono</h1>
<section>
  <h2>NAME</h2>
  <p>certmgr - Mono Certificate Manager (CLI version)
</section>
<section>
  <h2>SYNOPSIS</h2>
  <p><strong>certmgr [action] [object type] [options] store [filename]</strong> or <strong>certmgr -ssl [options] url</strong>
</section>
<section>
  <h2>DESCRIPTION</h2>
  <p>This tool allows to list, add, remove or extract certificates, certificate &nbsp;revocation lists (CRL) or certificate trust lists (CTL) to/from a &nbsp;certificate store. Certificate stores are used to build and validate &nbsp;certificate chains for Authenticode(r) code signing validation and SSL &nbsp;server certificates.
</section>
<section>
  <h2>STORES</h2>
  <p>The <em>store</em> represents the certificate store to use. It can be one of the following:
  <dl>
    <dt><em>My</em>
    <dd>
      <p>This is the personal certificate store.
    <dt><em>AddressBook</em>
    <dd>
      <p>This is the store for other people.
    <dt><em>CA</em>
    <dd>
      <p>This is a store for intermediate certificate authorities.
    <dt><em>Trust</em>
    <dd>
      <p>This is for trusted roots.
    <dt><em>Disallowed</em>
    <dd>
      <p>This is for untrusted roots
  </dl>
</section>
<section>
  <h2>ACTIONS</h2>
  <dl>
    <dt><em>-list</em>
    <dd>
      <p>List the certificates, CTL or CTL in the specified store.
    <dt><em>-add</em>
    <dd>
      <p>Add a certificate, CRL or CTL to specified store. If filename is a pkcs12 &nbsp;or pfx file, and it contains a private key, it will be imported to local key pair container.
    <dt><em>-del</em>
    <dd>
      <p>Remove a certificate, CRL or CTL from specified store. You must specify the &nbsp;object to be removed with it's hash value (and not a filename). This hash &nbsp;value is shown when doing a <strong>-list</strong> on the store.
    <dt><em>-put</em>
    <dd>
      <p>Copy a certificate, CRL or CTL from a store to a file.
    <dt><em>-ssl</em>
    <dd>
      <p>Download and add the certificates from a SSL session. You'll be asked to &nbsp;confirm the addition of every certificate received from the server. Note &nbsp;that SSL/TLS protocols do not requires a server to send the root certificate. This action assumes a certificate (-c) object type and will import the &nbsp;certificates in appropriate stores (i.e. server certificate in the &nbsp;OtherPeople store, the root certificate in the Trust store and any other &nbsp;intermediate certificates in the IntermediateCA store).
    <dt><em>-importKey</em>
    <dd>
      <p>Allows importing a private key from a pkcs12 file into a local key pair store. (Useful when you already have the key's corresponding certificate installed at the specific store.)
  </dl>
</section>
<section>
  <h2>OBJECT TYPES</h2>
  <dl>
    <dt><em>-c , -cert , -certificate</em>
    <dd>
      <p>Add, Delete or Put certificates. That is the specified file must/will contain X.509 certificates in DER binary encoding.
    <dt><em>-crl</em>
    <dd>
      <p>Add, Delete or Put certificate revocation lists (CRL). That is the specified &nbsp;file must/will contain X.509 CRL in DER binary encoding.
    <dt><em>-ctl</em>
    <dd>
      <p>Add, Delete or Put certificate trust lists (CRL). UNSUPPORTED.
  </dl>
</section>
<section>
  <h2>OPTIONS</h2>
  <dl>
    <dt><em>-m</em>
    <dd>
      <p>Use the machine's certificate stores (instead of the default user's stores).
    <dt><em>-v</em>
    <dd>
      <p>More details displayed on the console.
    <dt><em>-p password</em>
    <dd>
      <p>Use the specified password when accessing a pkcs12 file.
    <dt><em>-help , -h , -? , /?</em>
    <dd>
      <p>Display help about this tool.
  </dl>
</section>
<section>
  <h2>FILES</h2>
  <p><strong>WARNING: This details the current behavior of Mono and could change between releases.</strong> The only safe way to interact with certificate stores is to use the certmgr tool. The current releases of Mono keeps all the user certificate stores in &nbsp;separates directories under <em>~/.config/.mono/certs/</em>
  <dl>
    <dt>For example the trusted root certificates for a user would be kept under
    <dd>
      <p><em>~/.config/.mono/certs/Trust/</em>
    <dt>Certificates files are kept in DER (binary) format (extension .cer).
    <dt>The filenames either start with
    <dd>
      <p><em>tbp</em> (thumbprint) or <em>ski</em> (subject key identifier).
    <dt>The rest of the filename is the base64-encoded value (tbp or ski).
    <dt>Private key data is stored under
    <dd>
      <p><em>~/.config/.mono/keypairs/</em>
  </dl>
</section>
<section>
  <h2>EXAMPLES</h2>
  <dl>
    <dt><strong>mono certmgr.exe -list -c -m Trust</strong>
    <dd>
      <p>List all certificates in the machine Trust store. This will display the hash value for each certificate. This value can be used to identify uniquely a &nbsp;certificate for some operations (e.g. delete). E.g. <strong>Unique Hash: FFA3AC0084DA1673B5A031EBB2156B3E8FBBF6D8</strong>
    <dt><strong>mono certmgr.exe -del -c -m Trust FFA3AC0084DA1673B5A031EBB2156B3E8FBBF6D8</strong>
    <dd>
      <p>Remove the certificate, represented by the hash value, from the machine Trust store. Note that the machine store is normally restricted. The following error message will appear if the current user doesn't have the minimum access rights to remove the certificate: <strong>Access to the machine 'Trust' certificate store has been denied.</strong>
    <dt><strong>certmgr -ssl https://www.verisign.com</strong>
    <dd>
      <p>Import certificates from www.verisign.com used for HTTP over SSL. See KNOWN &nbsp;ISSUES (MD2) if you're downloading from www.verisign.com.
    <dt><strong>certmgr -ssl ldaps://www.nldap.com:636</strong>
    <dd>
      <p>Import the certificates from www.nldap.com used for secure LDAP. This works even if we don't know how to speak LDAP because we stop the communication shortly after the SSL handshake (which gives us the certificate).
  </dl>
</section>
<section>
  <h2>KNOWN ISSUES</h2>
  <dl>
    <dt><strong>MD2</strong>
    <dd>
      <p>Some Certificate Authorities (CA) old root certificates use the MD2 hash algorithm. MD2 is old enough not to be part of the standard .NET framework. &nbsp;This makes it impossible to validate a digital signature made with MD2. For this reason MD2 is included in the Mono.Security.dll assembly. However the machine.config file must be updated so the OID for MD2 is known at runtime.
      <p>To correct this insert the following XML snippet inside the &lt;configuration&gt; element of your machine.config file.<br>
      &nbsp;&lt;mscorlib&gt;<br>
      &nbsp; &nbsp;&lt;cryptographySettings&gt;<br>
      &nbsp; &nbsp; &nbsp;&lt;cryptoNameMapping&gt;<br>
      &nbsp; &nbsp; &nbsp; &nbsp;&lt;cryptoClasses&gt;<br>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;cryptoClass monoMD2="Mono.Security.Cryptography.MD2Managed, Mono.Security, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=0738eb9f132ed756" /&gt;<br>
      &nbsp; &nbsp; &nbsp; &nbsp;&lt;/cryptoClasses&gt;<br>
      &nbsp; &nbsp; &nbsp; &nbsp;&lt;nameEntry name="MD2" class="monoMD2" /&gt;<br>
      &nbsp; &nbsp; &nbsp;&lt;/cryptoNameMapping&gt;<br>
      &nbsp; &nbsp; &nbsp;&lt;oidMap&gt;<br>
      &nbsp; &nbsp; &nbsp; &nbsp;&lt;oidEntry OID="1.2.840.113549.2.2" name="MD2" /&gt;<br>
      &nbsp; &nbsp; &nbsp;&lt;/oidMap&gt;<br>
      &nbsp; &nbsp;&lt;/cryptographySettings&gt;<br>
      &nbsp;&lt;/mscorlib&gt;
  </dl>
</section>
<section>
  <h2>AUTHOR</h2>
  <p>Written by Sebastien Pouliot
  <p>Minor additions by Pablo Ruiz Garc√≠a
</section>
<section>
  <h2>COPYRIGHT</h2>
  <p>Copyright (C) 2004-2005 Novell.
</section>
<section>
  <h2>MAILING LISTS</h2>
  <p>Visit http://lists.ximian.com/mailman/listinfo/mono-list for details.
</section>
<section>
  <h2>WEB SITE</h2>
  <p>Visit http://www.mono-project.com for details
</section>
<section>
  <h2>SEE ALSO</h2>
  <p><strong>makecert(1),</strong>setreg(1)
</section>

