<!DOCTYPE html>
<meta charset="utf-8">
<meta name="man-page-info" data-extra1="July 2014" data-extra2="util-linux" data-extra3="User Commands">
<title>SU</title>
<h1>SU</h1>
<section>
  <h2>NAME</h2>
  <p>su - run a command with substitute user and group ID
</section>
<section>
  <h2>SYNOPSIS</h2>
  <p><strong>su</strong> [options] [<strong>-</strong>] [<em>user</em> [<em>argument</em>...]]
</section>
<section>
  <h2>DESCRIPTION</h2>
  <p><strong>su</strong> allows to run commands with a substitute user and group ID.
  <p>When called without arguments, <strong>su</strong> defaults to running an interactive shell as <em>root</em>.
  <p>For backward compatibility, <strong>su</strong> defaults to not change the current directory and to only set the environment variables <strong>HOME</strong> and <strong>SHELL</strong> (plus <strong>USER</strong> and <strong>LOGNAME</strong> if the target <em>user</em> is not root). &nbsp;It is recommended to always use the <strong>--login</strong> option (instead of its shortcut <strong>-</strong>) to avoid side effects caused by mixing environments.
  <p>This version of <strong>su</strong> uses PAM for authentication, account and session management. &nbsp;Some configuration options found in other <strong>su</strong> implementations, such as support for a wheel group, have to be configured via PAM.
  <p><strong>su</strong> is mostly designed for unprivileged users, the recommended solution for privileged users (e.g. scripts executed by root) is to use non-suid command <strong>runuser</strong>(1) that does not require authentication and provide separate PAM configuration. If the PAM session is not required at all then the recommend solution is to use command <strong>setpriv</strong>(1).
</section>
<section>
  <h2>OPTIONS</h2>
  <dl>
    <dt><strong>-c</strong>, <strong>--command</strong>=<strong><em>command</em></strong>
    <dd>
      <p>Pass <em>command</em> to the shell with the <strong>-c</strong> option.
    <dt><strong>-f</strong>, <strong>--fast</strong>
    <dd>
      <p>Pass <strong>-f</strong> to the shell, which may or may not be useful, depending on the shell.
    <dt><strong>-g</strong>, <strong>--group</strong>=<strong><em>group</em></strong>
    <dd>
      <p>Specify the primary group. &nbsp;This option is available to the root user only.
    <dt><strong>-G</strong>, <strong>--supp-group</strong>=<strong><em>group</em></strong>
    <dd>
      <p>Specify a supplemental group. &nbsp;This option is available to the root user only. &nbsp;The first specified supplementary group is also used as a primary group if the option <strong>--group</strong> is unspecified.
    <dt><strong>-</strong>, <strong>-l</strong>, <strong>--login</strong>
    <dd>
      <p>Start the shell as a login shell with an environment similar to a real login:
      <ul class="indent-3">
        <li>clears all the environment variables except <strong>TERM</strong>
        <li>initializes the environment variables <strong>HOME</strong>, <strong>SHELL</strong>, <strong>USER</strong>, <strong>LOGNAME</strong>, and <strong>PATH</strong>
        <li>changes to the target user's home directory
        <li>sets argv[0] of the shell to '<strong>-</strong>' in order to make the shell a login shell
      </ul>
    <dt><strong>-m</strong>, <strong>-p</strong>, <strong>--preserve-environment</strong>
    <dd>
      <p>Preserve the entire environment, i.e. it does not set <strong>HOME</strong>, <strong>SHELL</strong>, <strong>USER</strong> nor <strong>LOGNAME</strong>. This option is ignored if the option <strong>--login</strong> is specified.
    <dt><strong>-s</strong>, <strong>--shell</strong>=<strong><em>shell</em></strong>
    <dd>
      <p>Run the specified <em>shell</em> instead of the default. &nbsp;The shell to run is selected according to the following rules, in order:
      <ul class="indent-3">
        <li>the shell specified with <strong>--shell</strong>
        <li>the shell specified in the environment variable <strong>SHELL</strong>, if the <strong>--preserve-environment</strong> option is used
        <li>the shell listed in the passwd entry of the target user
        <li>/bin/sh
      </ul>
      <p>If the target user has a restricted shell (i.e. not listed in /etc/shells), the <strong>--shell</strong> option and the <strong>SHELL</strong> environment variables are ignored unless the calling user is root.
    <dt><strong>--session-command=</strong><em>command</em>
    <dd>
      <p>Same as <strong>-c</strong> but do not create a new session. &nbsp;(Discouraged.)
    <dt><strong>-V</strong>, <strong>--version</strong>
    <dd>
      <p>Display version information and exit.
    <dt><strong>-h</strong>, <strong>--help</strong>
    <dd>
      <p>Display help text and exit.
  </dl>
</section>
<section>
  <h2>SIGNALS</h2>
  <p>Upon receiving either <strong>SIGINT</strong>, <strong>SIGQUIT</strong> or <strong>SIGTERM</strong>, <strong>su</strong> terminates its child and afterwards terminates itself with the received signal.
</section>
<section>
  <h2>CONFIG FILES</h2>
  <p><strong>su</strong> reads the <em>/etc/default/su</em> and <em>/etc/login.defs</em> configuration files. &nbsp;The following configuration items are relevant for <strong>su</strong>(1):
  <dl>
    <dt><strong>FAIL_DELAY</strong> (number)
    <dd>
      <p>Delay in seconds in case of an authentication failure. The number must be a non-negative integer.
    <dt><strong>ENV_PATH</strong> (string)
    <dd>
      <p>Defines the PATH environment variable for a regular user. &nbsp;The default value is <em>/usr/local/bin:/bin:/usr/bin</em>.
    <dt><strong>ENV_ROOTPATH</strong> (string)
    <dt><strong>ENV_SUPATH</strong> (string)
    <dd>
      <p>Defines the PATH environment variable for root. &nbsp;The default value is <em>/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin</em>.
    <dt><strong>ALWAYS_SET_PATH</strong> (boolean)
    <dd>
      <p>If set to <em>yes</em> and --login and --preserve-environment were not specified <strong>su</strong> initializes <strong>PATH</strong>.
  </dl>
</section>
<section>
  <h2>EXIT STATUS</h2>
  <p><strong>su</strong> normally returns the exit status of the command it executed. &nbsp;If the command was killed by a signal, <strong>su</strong> returns the number of the signal plus 128.
  <p>Exit status generated by <strong>su</strong> itself:
  <dl class="indent-10">
    <dt>1
    <dd>
      <p>Generic error before executing the requested command
    <dt>126
    <dd>
      <p>The requested command could not be executed
    <dt>127
    <dd>
      <p>The requested command was not found
  </dl>
</section>
<section>
  <h2>FILES</h2>
  <dl>
    <dt>/etc/pam.d/su
    <dd>
      <p>default PAM configuration file
    <dt>/etc/pam.d/su-l
    <dd>
      <p>PAM configuration file if --login is specified
    <dt>/etc/default/su
    <dd>
      <p>command specific logindef config file
    <dt>/etc/login.defs
    <dd>
      <p>global logindef config file
  </dl>
</section>
<section>
  <h2>NOTES</h2>
  <p>For security reasons <strong>su</strong> always logs failed log-in attempts to the btmp file, but it does not write to the lastlog file at all. &nbsp;This solution allows to control <strong>su</strong> behavior by PAM configuration. &nbsp;If you want to use the pam_lastlog module to print warning message about failed log-in attempts then the pam_lastlog has to be configured to update the lastlog file as well. For example by:
  <div class="indent-7">
    <p>session &nbsp;required &nbsp;pam_lastlog.so nowtmp
  </div>
</section>
<section>
  <h2>SEE ALSO</h2>
  <p><strong>runuser</strong>(8), <strong>setpriv</strong>(1), <strong>pam</strong>(8), <strong>shells</strong>(5), <strong>login.defs</strong>(5)
</section>
<section>
  <h2>HISTORY</h2>
  <p>This <strong>su</strong> command was derived from coreutils' <strong>su</strong>, which was based on an implementation by David MacKenzie.
</section>
<section>
  <h2>AVAILABILITY</h2>
  <p>The su command is part of the util-linux package and is available from <a href="ftp://ftp.kernel.org/pub/linux/utils/util-linux/">Linux Kernel Archive</a>.
</section>

